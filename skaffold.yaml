apiVersion: skaffold/v1
kind: Config
metadata:
  name: application-
build:
  artifacts:
  - image: opencv
    sync:
      manual:
      - src: 'app/**/*.py'
        dest: .
        strip: app/
      - src: 'app/static/**'
        dest: .
        strip: app/
      - src: 'app/templates/**'
        dest: .
        strip: app/
  tagPolicy:
    dateTime: {}
deploy:
  # kustomize:
  #   path: .
  kubectl:
    manifests:
    - gen/*.yaml
    # - k8s/*
profiles:
- name: local
  activation:
  - env: KUBECONFIG=!
- name: incluster
  build:
    tagPolicy:
      dateTime: {}
    cluster:
      dockerConfig:
        secretName: dockerconfig
